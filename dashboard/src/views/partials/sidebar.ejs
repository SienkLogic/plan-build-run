<aside class="sidebar">
  <% if (typeof currentPhase !== 'undefined' && currentPhase) { %>
  <div class="sidebar-current-phase">
    <small>Current Phase</small>
    <a href="/phases/<%= currentPhase.number %>"
       hx-get="/phases/<%= currentPhase.number %>"
       hx-target="#main-content"
       hx-push-url="true">
      <strong>Phase <%= currentPhase.number %></strong>
      <span><%= currentPhase.name %></span>
      <span class="phase-status"><%= currentPhase.status %></span>
    </a>
  </div>
  <% } %>

  <% if (typeof currentPhase !== 'undefined' && currentPhase && currentPhase.nextAction) { %>
  <div class="sidebar-next-action">
    <small>Suggested next:</small>
    <code><%= currentPhase.nextAction %></code>
  </div>
  <% } %>

  <nav aria-label="Main navigation">
    <details open>
      <summary>Project</summary>
      <ul>
        <li>
          <a href="/"
             hx-get="/"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'dashboard' ? ' aria-current="page"' : '' %>>
            Dashboard
          </a>
        </li>
        <li>
          <a href="/roadmap"
             hx-get="/roadmap"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'roadmap' ? ' aria-current="page"' : '' %>>
            Roadmap
          </a>
        </li>
        <li>
          <a href="/phases"
             hx-get="/phases"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'phases' ? ' aria-current="page"' : '' %>>
            Phases
          </a>
        </li>
        <li>
          <a href="/dependencies"
             hx-get="/dependencies"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'dependencies' ? ' aria-current="page"' : '' %>>
            Dependencies
          </a>
        </li>
      </ul>
    </details>

    <details open>
      <summary>Planning</summary>
      <ul>
        <li>
          <a href="/config"
             hx-get="/config"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'config' ? ' aria-current="page"' : '' %>>
            Config
          </a>
        </li>
        <li>
          <a href="/research"
             hx-get="/research"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'research' ? ' aria-current="page"' : '' %>>
            Research
          </a>
        </li>
        <li>
          <a href="/requirements"
             hx-get="/requirements"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'requirements' ? ' aria-current="page"' : '' %>>
            Requirements
          </a>
        </li>
      </ul>
    </details>

    <details open>
      <summary>Work</summary>
      <ul>
        <li>
          <a href="/todos"
             hx-get="/todos"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'todos' ? ' aria-current="page"' : '' %>>
            Todos
          </a>
        </li>
        <li>
          <a href="/quick"
             hx-get="/quick"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'quick' ? ' aria-current="page"' : '' %>>
            Quick Tasks
          </a>
        </li>
        <li>
          <a href="/notes"
             hx-get="/notes"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'notes' ? ' aria-current="page"' : '' %>>
            Notes
          </a>
        </li>
      </ul>
    </details>

    <details>
      <summary>History</summary>
      <ul>
        <li>
          <a href="/milestones"
             hx-get="/milestones"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'milestones' ? ' aria-current="page"' : '' %>>
            Milestones
          </a>
        </li>
        <li>
          <a href="/analytics"
             hx-get="/analytics"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'analytics' ? ' aria-current="page"' : '' %>>
            Analytics
          </a>
        </li>
        <li>
          <a href="/audits"
             hx-get="/audits"
             hx-target="#main-content"
             hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'audits' ? ' aria-current="page"' : '' %>>
            Audit Reports
          </a>
        </li>
      </ul>
    </details>
  </nav>
</aside>
