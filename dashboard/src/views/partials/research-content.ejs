<%- include('breadcrumbs', { breadcrumbs: typeof breadcrumbs !== 'undefined' ? breadcrumbs : [] }) %>
<h1>Research</h1>

<h2>Research Documents</h2>
<% if (researchDocs.length === 0) { %>
<%- include('empty-state', { icon: 'R', title: 'No research documents', action: 'Run /pbr:explore or /pbr:scan to generate research.' }) %>
<% } else { %>
<% researchDocs.forEach(function(doc) { %>
<article class="card">
  <header class="card__header">
    <strong>
      <a href="/research/<%= doc.slug %>"
         hx-get="/research/<%= doc.slug %>"
         hx-target="#main-content"
         hx-push-url="true"><%= doc.title %></a>
    </strong>
    <% if (doc.date) { %><small style="float:right"><%= doc.date %></small><% } %>
  </header>
  <div class="card__body">
    <% if (doc.topic) { %><p><strong>Topic:</strong> <%= doc.topic %></p><% } %>
    <% if (doc.confidence || doc.coverage) { %>
    <p>
      <% if (doc.confidence) { %><span class="status-badge" data-status="<%= doc.confidence %>"><%= doc.confidence %></span>&nbsp;<% } %>
      <% if (doc.coverage) { %><small>Coverage: <%= doc.coverage %></small><% } %>
    </p>
    <% } %>
  </div>
</article>
<% }); %>
<% } %>

<h2>Codebase Documents</h2>
<% if (codebaseDocs.length === 0) { %>
<%- include('empty-state', { icon: 'C', title: 'No codebase documents', action: 'Run /pbr:scan to generate codebase analysis.' }) %>
<% } else { %>
<% codebaseDocs.forEach(function(doc) { %>
<article class="card">
  <header class="card__header">
    <strong>
      <a href="/research/<%= doc.slug %>"
         hx-get="/research/<%= doc.slug %>"
         hx-target="#main-content"
         hx-push-url="true"><%= doc.title %></a>
    </strong>
    <% if (doc.date) { %><small style="float:right"><%= doc.date %></small><% } %>
  </header>
</article>
<% }); %>
<% } %>
