<%- include('breadcrumbs', { breadcrumbs: typeof breadcrumbs !== 'undefined' ? breadcrumbs : [] }) %>
<h1><%= projectName %></h1>

<!-- Hero Stat Row -->
<div class="hero-stats">
  <!-- Current Phase -->
  <article>
    <header><strong>Current Phase</strong></header>
    <% if (currentPhase.id > 0) { %>
      <p class="stat-value">
        <a href="/phases/<%= String(currentPhase.id).padStart(2, '0') %>"
           hx-get="/phases/<%= String(currentPhase.id).padStart(2, '0') %>"
           hx-target="#main-content"
           hx-push-url="true">
          <span class="status-badge" data-status="in-progress">Phase <%= currentPhase.id %></span>
          <%= currentPhase.name %>
        </a>
      </p>
    <% } else { %>
      <p class="stat-value">No active phase</p>
    <% } %>
  </article>

  <!-- Progress -->
  <article>
    <header><strong>Progress</strong></header>
    <p class="stat-value"><%= progress %>%</p>
    <progress value="<%= progress %>" max="100"></progress>
  </article>

  <!-- Pending Todos -->
  <article>
    <header><strong>Pending Todos</strong></header>
    <p class="stat-value">
      <a href="/todos"
         hx-get="/todos"
         hx-target="#main-content"
         hx-push-url="true">
        <%= typeof pendingTodoCount !== 'undefined' ? pendingTodoCount : 0 %>
      </a>
    </p>
  </article>

  <!-- Last Activity -->
  <article>
    <header><strong>Last Activity</strong></header>
    <% if (lastActivity.date) { %>
      <p class="stat-value"><%= lastActivity.date %></p>
      <p><small><%= lastActivity.description %></small></p>
    <% } else { %>
      <p class="stat-value">None</p>
    <% } %>
  </article>
</div>

<!-- Quick Actions -->
<div class="quick-actions">
  <% var phaseId = String(currentPhase.id).padStart(2, '0'); %>
  <a role="button" class="outline"
     href="/phases/<%= phaseId %>"
     hx-get="/phases/<%= phaseId %>"
     hx-target="#main-content"
     hx-push-url="true">Current Phase</a>
  <a role="button" class="outline"
     href="/roadmap"
     hx-get="/roadmap"
     hx-target="#main-content"
     hx-push-url="true">Roadmap</a>
  <a role="button" class="outline"
     href="/todos/new"
     hx-get="/todos/new"
     hx-target="#main-content"
     hx-push-url="true">Create Todo</a>
</div>

<!-- Project Notes (if available) -->
<% if (content && content !== '<p>No project README found.</p>') { %>
<article>
  <header>
    <strong>Project Notes</strong>
  </header>
  <%- content %>
</article>
<% } %>
