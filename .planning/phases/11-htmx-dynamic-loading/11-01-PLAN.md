---
phase: "11-htmx-dynamic-loading"
plan: "11-01"
type: "feature"
wave: 1
depends_on: ["09-02", "10-02"]
files_modified:
  - "src/views/partials/head.ejs"
  - "src/views/partials/sidebar.ejs"
  - "src/views/partials/layout-top.ejs"
  - "src/views/partials/dashboard-content.ejs"
  - "src/views/partials/phase-content.ejs"
  - "src/views/partials/todos-content.ejs"
  - "src/views/partials/todo-detail-content.ejs"
  - "src/views/partials/roadmap-content.ejs"
  - "src/views/index.ejs"
  - "src/views/phase-detail.ejs"
  - "src/views/todos.ejs"
  - "src/views/todo-detail.ejs"
  - "src/views/roadmap.ejs"
autonomous: true
discovery: 0
must_haves:
  truths:
    - "HTMX 2.0.8 script tag is loaded on every page via head.ejs"
    - "HTMX SSE extension 2.2.2 script tag is loaded on every page via head.ejs"
    - "Each page's content area is extracted into a standalone content partial that renders without layout"
    - "Full-page views include the content partial between layout-top and layout-bottom (no duplication)"
    - "Sidebar navigation links have hx-get, hx-target='main', hx-push-url='true' attributes"
    - "The <main> tag in layout-top.ejs has a stable id attribute for HTMX targeting"
  artifacts:
    - "src/views/partials/head.ejs contains HTMX 2.0.8 and SSE extension CDN script tags"
    - "src/views/partials/dashboard-content.ejs exists with dashboard content extracted from index.ejs"
    - "src/views/partials/phase-content.ejs exists with phase detail content extracted from phase-detail.ejs"
    - "src/views/partials/todos-content.ejs exists with todo list content extracted from todos.ejs"
    - "src/views/partials/todo-detail-content.ejs exists with todo detail content extracted from todo-detail.ejs"
    - "src/views/partials/roadmap-content.ejs exists with roadmap content extracted from roadmap.ejs"
    - "src/views/partials/sidebar.ejs updated with HTMX navigation attributes"
    - "src/views/partials/layout-top.ejs updated with id on main tag"
  key_links:
    - "index.ejs includes dashboard-content.ejs partial for its content"
    - "phase-detail.ejs includes phase-content.ejs partial for its content"
    - "todos.ejs includes todos-content.ejs partial for its content"
    - "todo-detail.ejs includes todo-detail-content.ejs partial for its content"
    - "roadmap.ejs includes roadmap-content.ejs partial for its content"
    - "Sidebar hx-get targets the main element by tag (hx-target='main')"
---

# Plan 11-01: HTMX Infrastructure -- CDN Tags, Content Partials, Sidebar Attributes

## Overview

Add HTMX 2.0.8 and the SSE extension from CDN to every page. Extract each view's
content area into standalone content partials so that route handlers can render
either the full page (with layout) or just the fragment (content partial only).
Update sidebar links with HTMX attributes for SPA-like navigation.

This plan touches only templates -- no route or service logic changes. Route handlers
are updated in Plan 11-02 to detect HX-Request and return fragments.

## Tasks

<task id="11-01-T1" type="auto">
  <name>Add HTMX CDN script tags and set id on main element</name>
  <files>
    src/views/partials/head.ejs
    src/views/partials/layout-top.ejs
  </files>
  <action>
1. Open `src/views/partials/head.ejs` and add the HTMX script tags after the
   existing CSS link tags (after the status-colors.css line), still inside `<head>`:

   ```html
   <script
     src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"
     integrity="sha384-/TgkGk7p307TH7EXJDuUlgG3Ce1UVolAOFopFekQkkXihi5u/6OCvVKyz1W+idaz"
     crossorigin="anonymous">
   </script>
   <script src="https://cdn.jsdelivr.net/npm/htmx-ext-sse@2.2.2/sse.js"></script>
   ```

   The final head.ejs should look like:
   ```ejs
   <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title><%= typeof title !== 'undefined' ? title : 'Towline' %> - Towline</title>
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
     <link rel="stylesheet" href="/css/layout.css">
     <link rel="stylesheet" href="/css/status-colors.css">
     <script
       src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"
       integrity="sha384-/TgkGk7p307TH7EXJDuUlgG3Ce1UVolAOFopFekQkkXihi5u/6OCvVKyz1W+idaz"
       crossorigin="anonymous">
     </script>
     <script src="https://cdn.jsdelivr.net/npm/htmx-ext-sse@2.2.2/sse.js"></script>
   </head>
   ```

2. Open `src/views/partials/layout-top.ejs` and add an `id` attribute to the
   `<main>` tag so HTMX can target it. Change:

   ```html
   <main>
   ```

   To:

   ```html
   <main id="main-content">
   ```

   The full layout-top.ejs should now be:
   ```ejs
   <!DOCTYPE html>
   <html lang="en">
   <%- include('head', { title: typeof title !== 'undefined' ? title : 'Towline Dashboard' }) %>
   <body>
     <div class="page-wrapper">
       <%- include('header') %>
       <%- include('sidebar', { activePage: typeof activePage !== 'undefined' ? activePage : '' }) %>
       <main id="main-content">
   ```
  </action>
  <verify>
    node -e "const fs = require('fs'); const head = fs.readFileSync('D:/Repos/towline-test-project/src/views/partials/head.ejs','utf-8'); const layout = fs.readFileSync('D:/Repos/towline-test-project/src/views/partials/layout-top.ejs','utf-8'); if (!head.includes('htmx.org@2.0.8')) throw new Error('head.ejs missing HTMX script tag'); if (!head.includes('htmx-ext-sse@2.2.2')) throw new Error('head.ejs missing SSE extension script tag'); if (!head.includes('crossorigin')) throw new Error('head.ejs missing crossorigin attribute'); if (!layout.includes('id=\"main-content\"')) throw new Error('layout-top.ejs missing id on main tag'); console.log('PASS: HTMX CDN tags and main id present');"
  </verify>
  <done>
    HTMX 2.0.8 and SSE extension 2.2.2 are loaded via CDN on every page. The main content area has a stable id="main-content" for HTMX targeting.
  </done>
</task>

<task id="11-01-T2" type="auto">
  <name>Extract content partials from all views and update sidebar with HTMX attributes</name>
  <files>
    src/views/partials/dashboard-content.ejs
    src/views/partials/phase-content.ejs
    src/views/partials/todos-content.ejs
    src/views/partials/todo-detail-content.ejs
    src/views/partials/roadmap-content.ejs
    src/views/index.ejs
    src/views/phase-detail.ejs
    src/views/todos.ejs
    src/views/todo-detail.ejs
    src/views/roadmap.ejs
    src/views/partials/sidebar.ejs
  </files>
  <action>
1. Create `src/views/partials/dashboard-content.ejs` by extracting the content from
   `index.ejs` -- everything BETWEEN the layout-top include and the layout-bottom
   include. Copy lines 3-77 of the current index.ejs (from `<h1><%= projectName %>`
   through the closing `<% } %>` of the README section) into the new partial.

   The content of `dashboard-content.ejs` should be:
   ```ejs
   <h1><%= projectName %></h1>

   <!-- Project Overview Card -->
   <article>
     <header>
       <strong>Current Phase</strong>
     </header>
     <% if (currentPhase.id > 0) { %>
       <p>
         <span class="status-badge" data-status="in-progress">Phase <%= currentPhase.id %></span>
         <%= currentPhase.name %>
       </p>
       <p><small><%= currentPhase.planStatus %></small></p>
     <% } else { %>
       <p>No active phase. Project has not started yet.</p>
     <% } %>

     <% if (lastActivity.date) { %>
       <p><small>Last activity: <%= lastActivity.date %> &mdash; <%= lastActivity.description %></small></p>
     <% } %>
   </article>

   <!-- Overall Progress -->
   <article>
     <header>
       <strong>Overall Progress</strong>
     </header>
     <progress value="<%= progress %>" max="100"></progress>
     <p><%= progress %>% complete (<%= phases.filter(p => p.status === 'complete').length %> of <%= phases.length %> phases)</p>
   </article>

   <!-- Phase List -->
   <article>
     <header>
       <strong>All Phases</strong>
     </header>
     <% if (phases.length > 0) { %>
       <table>
         <thead>
           <tr>
             <th scope="col">Phase</th>
             <th scope="col">Name</th>
             <th scope="col">Description</th>
             <th scope="col">Status</th>
           </tr>
         </thead>
         <tbody>
           <% phases.forEach(function(phase) { %>
           <tr>
             <td><%= String(phase.id).padStart(2, '0') %></td>
             <td><a href="/phases/<%= String(phase.id).padStart(2, '0') %>"><%= phase.name %></a></td>
             <td><%= phase.description %></td>
             <td>
               <span class="status-badge" data-status="<%= phase.status %>">
                 <%= phase.status.replace('-', ' ') %>
               </span>
             </td>
           </tr>
           <% }); %>
         </tbody>
       </table>
     <% } else { %>
       <p>No phases found. Add a ROADMAP.md file to your .planning/ directory to see phases here.</p>
     <% } %>
   </article>

   <!-- README Content (if available) -->
   <% if (content && content !== '<p>No project README found.</p>') { %>
   <article>
     <header>
       <strong>Project Notes</strong>
     </header>
     <%- content %>
   </article>
   <% } %>
   ```

2. Replace the content of `src/views/index.ejs` to include the new content partial:
   ```ejs
   <%- include('partials/layout-top', { title: title, activePage: 'dashboard' }) %>

   <%- include('partials/dashboard-content') %>

   <%- include('partials/layout-bottom') %>
   ```

3. Create `src/views/partials/phase-content.ejs` by extracting everything from
   `phase-detail.ejs` between layout-top and layout-bottom includes (lines 3-183).
   Copy the entire content section -- from `<h1>Phase ...` through the commit
   history closing `<% } %>`. The content is the full body of the current
   phase-detail.ejs minus the two layout includes.

   The content of `phase-content.ejs` should be the following (this is lines 3-182
   of the current phase-detail.ejs, exactly as-is):
   ```ejs
   <h1>Phase <%= phaseId %>: <%= phaseName %></h1>

   <p><a href="/">&larr; Back to Dashboard</a></p>

   <% if (verification) { %>
   <!-- Verification Summary Card -->
   <article>
     <header>
       <strong>Verification Status</strong>
     </header>
     <%
       // Map verification status to CSS status-badge data-status values
       var verificationCssStatus = 'not-started';
       if (verification.status === 'passed') verificationCssStatus = 'complete';
       else if (verification.status === 'failed') verificationCssStatus = 'blocked';
       else if (verification.status === 'partial') verificationCssStatus = 'in-progress';
     %>
     <p>
       <span class="status-badge" data-status="<%= verificationCssStatus %>">
         <%= verification.status.toUpperCase() %>
       </span>
       <% if (verification.verified) { %>
         &nbsp; Verified: <%= new Date(verification.verified).toLocaleString() %>
       <% } %>
     </p>
     <% if (verification.score) { %>
       <p>
         Score: <%= verification.score.verified %>/<%= verification.score.total_must_haves %> must-haves verified
       </p>
       <% if (verification.score.failed > 0) { %>
         <p><strong><%= verification.score.failed %> must-haves FAILED</strong></p>
       <% } %>
     <% } %>
     <% if (verification.gaps && verification.gaps.length > 0) { %>
       <details>
         <summary>Verification Gaps (<%= verification.gaps.length %>)</summary>
         <ul>
           <% verification.gaps.forEach(function(gap) { %>
             <li><%= gap %></li>
           <% }); %>
         </ul>
       </details>
     <% } %>
   </article>
   <% } %>

   <% if (plans.length === 0) { %>
   <!-- Empty State -->
   <article>
     <p>No plans found for this phase. This phase may not have been planned yet.</p>
   </article>
   <% } else { %>

   <h2>Plans (<%= plans.length %>)</h2>

   <!-- Plan Cards -->
   <% plans.forEach(function(plan) { %>
   <article>
     <header>
       <strong>Plan <%= plan.planId %></strong>
       <% if (plan.summary && plan.summary.status) { %>
         &nbsp;
         <span class="status-badge" data-status="<%= plan.summary.status %>">
           <%= plan.summary.status.replace('-', ' ') %>
         </span>
       <% } %>
     </header>

     <% if (plan.summary) { %>

       <% if (plan.summary.subsystem) { %>
         <p><strong>Subsystem:</strong> <%= plan.summary.subsystem %></p>
       <% } %>

       <% if (plan.summary.key_decisions && plan.summary.key_decisions.length > 0) { %>
         <details>
           <summary>Key Decisions (<%= plan.summary.key_decisions.length %>)</summary>
           <ul>
             <% plan.summary.key_decisions.forEach(function(decision) { %>
               <li><%= decision %></li>
             <% }); %>
           </ul>
         </details>
       <% } %>

       <% if (plan.summary.key_files && plan.summary.key_files.length > 0) { %>
         <details>
           <summary>Key Files (<%= plan.summary.key_files.length %>)</summary>
           <ul>
             <% plan.summary.key_files.forEach(function(file) { %>
               <li><code><%= file %></code></li>
             <% }); %>
           </ul>
         </details>
       <% } %>

       <% if (plan.summary.deferred && plan.summary.deferred.length > 0) { %>
         <details>
           <summary>Deferred Items (<%= plan.summary.deferred.length %>)</summary>
           <ul>
             <% plan.summary.deferred.forEach(function(item) { %>
               <li><%= item %></li>
             <% }); %>
           </ul>
         </details>
       <% } %>

       <% if (plan.summary.metrics) { %>
         <p>
           <small>
             <% if (plan.summary.metrics.duration_minutes != null) { %>
               Duration: <%= plan.summary.metrics.duration_minutes %> min
             <% } %>
             <% if (plan.summary.metrics.commits != null) { %>
               | Commits: <%= plan.summary.metrics.commits %>
             <% } %>
             <% if (plan.summary.metrics.files_created != null || plan.summary.metrics.files_modified != null) { %>
               | Files: <%= plan.summary.metrics.files_created || 0 %> created, <%= plan.summary.metrics.files_modified || 0 %> modified
             <% } %>
           </small>
         </p>
       <% } %>

     <% } else { %>
       <!-- Plan exists but not executed yet -->
       <p><em>Plan file exists but has not been executed yet. No summary available.</em></p>
     <% } %>
   </article>
   <% }); %>

   <% } %>

   <!-- Commit History Section -->
   <%
     // Collect all commits across all plans, tagged with their planId
     var allCommits = [];
     plans.forEach(function(plan) {
       if (plan.commits && plan.commits.length > 0) {
         plan.commits.forEach(function(commit) {
           allCommits.push({ planId: plan.planId, commit: commit });
         });
       }
     });
   %>

   <h2>Commit History (<%= allCommits.length %>)</h2>

   <% if (allCommits.length === 0) { %>
   <article>
     <p><em>No commits yet for this phase.</em></p>
   </article>
   <% } else { %>
   <table>
     <thead>
       <tr>
         <th>Commit</th>
         <th>Task</th>
         <th>Plan</th>
         <th>Files</th>
         <th>Status</th>
       </tr>
     </thead>
     <tbody>
       <% allCommits.forEach(function(entry) { %>
       <tr>
         <td><code><%= entry.commit.hash %></code></td>
         <td><%= entry.commit.task %></td>
         <td><%= entry.planId %></td>
         <td><%= entry.commit.files %></td>
         <td>
           <span class="status-badge" data-status="<%= entry.commit.verify === 'passed' ? 'complete' : (entry.commit.verify === 'failed' ? 'blocked' : 'in-progress') %>">
             <%= entry.commit.verify %>
           </span>
         </td>
       </tr>
       <% }); %>
     </tbody>
   </table>
   <% } %>
   ```

4. Replace the content of `src/views/phase-detail.ejs` to include the new partial:
   ```ejs
   <%- include('partials/layout-top', { title: title, activePage: 'phases' }) %>

   <%- include('partials/phase-content') %>

   <%- include('partials/layout-bottom') %>
   ```

5. Create `src/views/partials/todos-content.ejs` by extracting the content from
   `todos.ejs` (lines 3-51). The content of `todos-content.ejs` should be:
   ```ejs
   <h1>Todos</h1>

   <p><a href="/todos/new" role="button">Create Todo</a></p>

   <% if (todos.length > 0) { %>
   <article>
     <table>
       <thead>
         <tr>
           <th scope="col">ID</th>
           <th scope="col">Title</th>
           <th scope="col">Priority</th>
           <th scope="col">Phase</th>
           <th scope="col">Status</th>
           <th scope="col">Created</th>
         </tr>
       </thead>
       <tbody>
         <% todos.forEach(function(todo) { %>
         <tr>
           <td><%= todo.id %></td>
           <td>
             <a href="/todos/<%= todo.id %>">
               <%= todo.title %>
             </a>
           </td>
           <td>
             <span class="status-badge" data-priority="<%= todo.priority %>">
               <%= todo.priority %>
             </span>
           </td>
           <td><%= todo.phase %></td>
           <td>
             <span class="status-badge" data-status="<%= todo.status %>">
               <%= todo.status %>
             </span>
           </td>
           <td><%= todo.created %></td>
         </tr>
         <% }); %>
       </tbody>
     </table>
   </article>
   <% } else { %>
   <article>
     <p>No pending todos found. Add a todo file to <code>.planning/todos/pending/</code> to see it here.</p>
   </article>
   <% } %>
   ```

6. Replace the content of `src/views/todos.ejs` to include the new partial:
   ```ejs
   <%- include('partials/layout-top', { title: 'Todos', activePage: 'todos' }) %>

   <%- include('partials/todos-content') %>

   <%- include('partials/layout-bottom') %>
   ```

7. Create `src/views/partials/todo-detail-content.ejs` by extracting the content from
   `todo-detail.ejs` (lines 3-38). The content of `todo-detail-content.ejs` should be:
   ```ejs
   <h1><%= title %></h1>

   <p><a href="/todos">&larr; Back to Todos</a></p>

   <article>
     <header>
       <strong>Todo <%= id %></strong>
       &nbsp;
       <span class="status-badge" data-priority="<%= priority %>">
         <%= priority %>
       </span>
       &nbsp;
       <span class="status-badge" data-status="<%= status %>">
         <%= status %>
       </span>
     </header>

     <% if (phase) { %>
     <p><strong>Phase:</strong> <%= phase %></p>
     <% } %>
     <% if (created) { %>
     <p><strong>Created:</strong> <%= created %></p>
     <% } %>

     <hr>

     <%- html %>

     <% if (status === 'pending') { %>
     <hr>
     <form method="POST" action="/todos/<%= id %>/done" style="display:inline;">
       <button type="submit" class="secondary">Mark as Done</button>
     </form>
     <% } %>
   </article>
   ```

8. Replace the content of `src/views/todo-detail.ejs` to include the new partial:
   ```ejs
   <%- include('partials/layout-top', { title: title, activePage: 'todos' }) %>

   <%- include('partials/todo-detail-content') %>

   <%- include('partials/layout-bottom') %>
   ```

9. Create `src/views/partials/roadmap-content.ejs` by extracting the content from
   `roadmap.ejs` (lines 3-53). The content of `roadmap-content.ejs` should be:
   ```ejs
   <h1>Project Roadmap</h1>

   <% if (phases.length > 0) { %>
   <article>
     <table>
       <thead>
         <tr>
           <th scope="col">Phase</th>
           <th scope="col">Name</th>
           <th scope="col">Description</th>
           <th scope="col">Plans</th>
           <th scope="col">Status</th>
           <th scope="col">Depends On</th>
         </tr>
       </thead>
       <tbody>
         <% phases.forEach(function(phase) { %>
         <tr>
           <td><%= String(phase.id).padStart(2, '0') %></td>
           <td>
             <a href="/phases/<%= String(phase.id).padStart(2, '0') %>">
               <%= phase.name %>
             </a>
           </td>
           <td><%= phase.description %></td>
           <td><%= phase.planCount %></td>
           <td>
             <span class="status-badge" data-status="<%= phase.status %>">
               <%= phase.status.replace('-', ' ') %>
             </span>
           </td>
           <td>
             <% if (phase.dependencies && phase.dependencies.length > 0) { %>
               <% phase.dependencies.forEach(function(dep, idx) { %>
                 <a href="/phases/<%= String(dep).padStart(2, '0') %>"><%= String(dep).padStart(2, '0') %></a><% if (idx < phase.dependencies.length - 1) { %>, <% } %>
               <% }); %>
             <% } else { %>
               <small>None</small>
             <% } %>
           </td>
         </tr>
         <% }); %>
       </tbody>
     </table>
   </article>
   <% } else { %>
   <article>
     <p>No phases found. Add a ROADMAP.md file to your .planning/ directory to see the roadmap here.</p>
   </article>
   <% } %>
   ```

10. Replace the content of `src/views/roadmap.ejs` to include the new partial:
    ```ejs
    <%- include('partials/layout-top', { title: 'Roadmap', activePage: 'roadmap' }) %>

    <%- include('partials/roadmap-content') %>

    <%- include('partials/layout-bottom') %>
    ```

11. Open `src/views/partials/sidebar.ejs` and add HTMX attributes to each navigation
    link. Each `<a>` tag gets three new attributes:
    - `hx-get="{path}"` (same as the href)
    - `hx-target="#main-content"` (targets the main element by id)
    - `hx-push-url="true"` (updates browser URL bar)

    The updated sidebar.ejs should be:
    ```ejs
    <aside class="sidebar">
      <nav>
        <ul>
          <li>
            <a href="/"
               hx-get="/"
               hx-target="#main-content"
               hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'dashboard' ? ' aria-current="page"' : '' %>>
              Dashboard
            </a>
          </li>
          <li>
            <a href="/phases"
               hx-get="/phases"
               hx-target="#main-content"
               hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'phases' ? ' aria-current="page"' : '' %>>
              Phases
            </a>
          </li>
          <li>
            <a href="/todos"
               hx-get="/todos"
               hx-target="#main-content"
               hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'todos' ? ' aria-current="page"' : '' %>>
              Todos
            </a>
          </li>
          <li>
            <a href="/roadmap"
               hx-get="/roadmap"
               hx-target="#main-content"
               hx-push-url="true"<%= typeof activePage !== 'undefined' && activePage === 'roadmap' ? ' aria-current="page"' : '' %>>
              Roadmap
            </a>
          </li>
        </ul>
      </nav>
    </aside>
    ```

    Note: `hx-swap` is intentionally omitted because HTMX defaults to `innerHTML`,
    which is exactly what we want for replacing the main content area.
  </action>
  <verify>
    node -e "const fs = require('fs'); const path = require('path'); const views = 'D:/Repos/towline-test-project/src/views'; const partials = path.join(views, 'partials'); const files = ['dashboard-content.ejs','phase-content.ejs','todos-content.ejs','todo-detail-content.ejs','roadmap-content.ejs']; for (const f of files) { if (!fs.existsSync(path.join(partials, f))) throw new Error('Missing partial: ' + f); } const index = fs.readFileSync(path.join(views, 'index.ejs'), 'utf-8'); if (!index.includes('dashboard-content')) throw new Error('index.ejs not using dashboard-content partial'); const pd = fs.readFileSync(path.join(views, 'phase-detail.ejs'), 'utf-8'); if (!pd.includes('phase-content')) throw new Error('phase-detail.ejs not using phase-content partial'); const todos = fs.readFileSync(path.join(views, 'todos.ejs'), 'utf-8'); if (!todos.includes('todos-content')) throw new Error('todos.ejs not using todos-content partial'); const td = fs.readFileSync(path.join(views, 'todo-detail.ejs'), 'utf-8'); if (!td.includes('todo-detail-content')) throw new Error('todo-detail.ejs not using todo-detail-content partial'); const rm = fs.readFileSync(path.join(views, 'roadmap.ejs'), 'utf-8'); if (!rm.includes('roadmap-content')) throw new Error('roadmap.ejs not using roadmap-content partial'); const sidebar = fs.readFileSync(path.join(partials, 'sidebar.ejs'), 'utf-8'); if (!sidebar.includes('hx-get')) throw new Error('sidebar.ejs missing hx-get'); if (!sidebar.includes('hx-target')) throw new Error('sidebar.ejs missing hx-target'); if (!sidebar.includes('hx-push-url')) throw new Error('sidebar.ejs missing hx-push-url'); console.log('PASS: all 5 content partials exist, full views use them, sidebar has HTMX attrs');" && npx --prefix D:/Repos/towline-test-project vitest run --reporter=verbose
  </verify>
  <done>
    All page views have been refactored into layout wrapper + content partial. Content partials can be rendered independently for HTMX fragment responses. Sidebar links have hx-get, hx-target, and hx-push-url attributes. All existing tests pass (no route or service changes in this plan).
  </done>
</task>
