---
phase: "13-extract-and-deduplicate"
plan: "13-06"
type: "refactor"
wave: 1
depends_on: []
files_modified:
  - "plugins/dev/skills/milestone/templates/audit-report.md.tmpl"
  - "plugins/dev/skills/milestone/templates/stats-file.md.tmpl"
  - "plugins/dev/skills/milestone/SKILL.md"
  - "plugins/dev/skills/pause/templates/continue-here.md.tmpl"
  - "plugins/dev/skills/pause/SKILL.md"
  - "plugins/dev/skills/quick/templates/plan-format.md.tmpl"
  - "plugins/dev/skills/quick/SKILL.md"
autonomous: true
discovery: 0
must_haves:
  truths:
    - "milestone/SKILL.md contains no inline templates longer than 20 lines"
    - "pause/SKILL.md contains no inline templates longer than 20 lines"
    - "quick/SKILL.md contains no inline templates longer than 20 lines"
    - "All extracted templates exist in their respective templates/ directories"
  artifacts:
    - "plugins/dev/skills/milestone/templates/audit-report.md.tmpl"
    - "plugins/dev/skills/milestone/templates/stats-file.md.tmpl"
    - "plugins/dev/skills/pause/templates/continue-here.md.tmpl"
    - "plugins/dev/skills/quick/templates/plan-format.md.tmpl"
  key_links:
    - "milestone/SKILL.md audit subcommand references audit-report.md.tmpl"
    - "milestone/SKILL.md complete subcommand references stats-file.md.tmpl"
    - "pause/SKILL.md Step 4 references continue-here.md.tmpl"
    - "quick/SKILL.md Step 6 references plan-format.md.tmpl"
---

# Plan 13-06: Extract milestone, pause, and quick SKILL.md templates

This plan extracts inline templates from 3 medium-priority SKILL.md files: milestone (~95 lines of templates), pause (~75 lines), and quick (~60 lines). These are document format templates (not agent prompts) that specify output file structures.

<task id="13-06-T1" type="auto" tdd="false">
  <name>Extract milestone/SKILL.md templates and update references</name>
  <files>
    plugins/dev/skills/milestone/templates/audit-report.md.tmpl
    plugins/dev/skills/milestone/templates/stats-file.md.tmpl
    plugins/dev/skills/milestone/SKILL.md
  </files>
  <action>
1. Create directory `plugins/dev/skills/milestone/templates/`

2. Extract the Audit Report template from `skills/milestone/SKILL.md` lines 358-404 (content inside the code fence in the `audit` subcommand, Step 5 "Write audit report"). Write to `skills/milestone/templates/audit-report.md.tmpl` with this header:
   ```
   <!-- Source: milestone/SKILL.md | Purpose: Template for milestone audit report output -->
   ```
   Then the exact content starting with the YAML frontmatter `---` through `{Summary of what needs to be done, if anything}`.
   This includes: frontmatter block, Overall Status heading, Phase Verification Summary table, Integration Check Results section, Requirements Coverage table, Tech Debt section, and Recommendations section.

3. Extract the Stats file template from `skills/milestone/SKILL.md` lines 220-248 (content inside the code fence in the `complete` subcommand, Step 5 "Stats file content"). Write to `skills/milestone/templates/stats-file.md.tmpl` with this header:
   ```
   <!-- Source: milestone/SKILL.md | Purpose: Template for milestone completion stats file -->
   ```
   Then the exact content starting with `# Milestone {version} Stats` through `{list of patterns applied}`.

4. Update `skills/milestone/SKILL.md`:

   a. **Audit subcommand, Step 5** (lines 356-404):
      Replace the code fence showing the audit report format with:
      ```markdown
      Read `skills/milestone/templates/audit-report.md.tmpl` and use it as the template for the audit report. Fill in all placeholders:
      - `{version}` - milestone version
      - `{ISO date}` - current date
      - Phase verification data from Steps 2-4
      - Integration check results from Step 3
      - Requirements coverage from Step 4
      - Status: "passed", "gaps_found", or "tech_debt"

      Write the report to `.planning/{version}-MILESTONE-AUDIT.md`.
      ```

   b. **Complete subcommand, Step 5** (lines 218-248):
      Replace the code fence showing the stats file format with:
      ```markdown
      Read `skills/milestone/templates/stats-file.md.tmpl` and use it as the template for the stats file. Fill in all placeholders:
      - `{version}` - milestone version
      - `{milestone name}` - milestone name
      - `{ISO date}` - completion date
      - `{days}` - duration in days
      - Metrics from Step 3 (phases, plans, commits, files, lines)
      - Accomplishments and decisions from Step 4

      Write to `.planning/milestones/{version}-STATS.md`.
      ```

5. Preserve ALL other content in milestone/SKILL.md (argument parsing, all 4 subcommand flows, state integration, git integration, edge cases, anti-patterns).
  </action>
  <verify>
ls -la plugins/dev/skills/milestone/templates/
wc -l plugins/dev/skills/milestone/SKILL.md
grep -c "Read \`skills/milestone/templates/" plugins/dev/skills/milestone/SKILL.md
awk "/^```/{start=NR; count=0; next} /^```/{if(NR-start>20) print FILENAME\": block at line \"start\" is \"(NR-start)\" lines\"; next}" plugins/dev/skills/milestone/SKILL.md
  </verify>
  <done>
    milestone/templates/ contains 2 template files. milestone/SKILL.md references both via Read instructions, is under 510 lines (down from 573), and no code-fence blocks exceed 20 lines.
  </done>
</task>

<task id="13-06-T2" type="auto" tdd="false">
  <name>Extract pause/SKILL.md and quick/SKILL.md templates and update references</name>
  <files>
    plugins/dev/skills/pause/templates/continue-here.md.tmpl
    plugins/dev/skills/pause/SKILL.md
    plugins/dev/skills/quick/templates/plan-format.md.tmpl
    plugins/dev/skills/quick/SKILL.md
  </files>
  <action>
1. Create directory `plugins/dev/skills/pause/templates/`

2. Extract the .continue-here.md template from `skills/pause/SKILL.md` lines 107-174 (content inside the code fence in Step 4 "Write .continue-here.md"). Write to `skills/pause/templates/continue-here.md.tmpl` with this header:
   ```
   <!-- Source: pause/SKILL.md | Purpose: Template for session pause handoff file -->
   ```
   Then the exact content starting with `# Continue Here` through the last `3. {And so on}` line.
   This includes all sections: Position, Completed This Session, Remaining, Decisions Made, Blockers, Context Notes, Next Steps -- with their placeholder text and conditional blocks.

3. Update `skills/pause/SKILL.md`:

   **Step 4** (lines 99-174):
   Replace the code fence showing the .continue-here.md format with:
   ```markdown
   Read `skills/pause/templates/continue-here.md.tmpl` and use it as the template for the handoff file. Fill in all placeholders from the information gathered in Steps 1-3:
   - `{ISO datetime}` - current timestamp
   - `{estimated hours}` - estimated session duration from git log timestamps
   - Position info (phase, plan number, status)
   - Completed work with commit references
   - Remaining plans from frontmatter scan
   - Key decisions from the session
   - Blockers from STATE.md or verification failures
   - Context notes relevant to future sessions
   - Ordered next steps list

   Write to `.planning/phases/{NN}-{phase-name}/.continue-here.md`.
   ```

4. Create directory `plugins/dev/skills/quick/templates/`

5. Extract the Quick Task PLAN.md format from `skills/quick/SKILL.md` lines 86-113 (content inside the code fence in Step 6 "Create Minimal PLAN.md"). Write to `skills/quick/templates/plan-format.md.tmpl` with this header:
   ```
   <!-- Source: quick/SKILL.md | Purpose: Template for quick task plan file format -->
   ```
   Then the exact content starting with the YAML frontmatter `---` through the closing `</task>` tag.

6. Update `skills/quick/SKILL.md`:

   **Step 6** (lines 84-114):
   Replace the code fence showing the PLAN.md format with:
   ```markdown
   Read `skills/quick/templates/plan-format.md.tmpl` and use it as the template for the quick task plan file. Fill in the placeholders:
   - `{NNN}` - zero-padded task number
   - `{count}` - number of tasks (1-3)
   - `{description}` - task description from user
   - `{task name}` - concise task name
   - `{list of files}` - inferred file paths
   - `{step-by-step instructions}` - generated action steps
   - `{verification command}` - inferred verify command
   - `{completion criteria}` - done condition

   Write to `.planning/quick/{NNN}-{slug}/PLAN.md`.
   ```

7. Preserve ALL other content in both SKILL.md files.
  </action>
  <verify>
ls -la plugins/dev/skills/pause/templates/ plugins/dev/skills/quick/templates/
wc -l plugins/dev/skills/pause/SKILL.md plugins/dev/skills/quick/SKILL.md
awk "/^```/{start=NR; count=0; next} /^```/{if(NR-start>20) print FILENAME\": block at line \"start\" is \"(NR-start)\" lines\"; next}" plugins/dev/skills/pause/SKILL.md plugins/dev/skills/quick/SKILL.md
  </verify>
  <done>
    pause/templates/ and quick/templates/ each contain 1 template file. Both SKILL.md files reference their templates via Read instructions, are shorter than their originals (pause: under 220 lines from 280, quick: under 250 lines from 289), and no code-fence blocks exceed 20 lines.
  </done>
</task>
