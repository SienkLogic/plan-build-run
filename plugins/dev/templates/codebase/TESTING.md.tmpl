<!-- Source: agents/towline-codebase-mapper.md | Purpose: Output format for TESTING.md codebase analysis -->
# Testing Infrastructure

> Analyzed: {date}
> Test files found: {n}
> Coverage: {percentage if configured}

## Framework

| Aspect | Value | Config |
|--------|-------|--------|
| Test runner | {Jest / Vitest / pytest / etc.} | {config file path} |
| Assertion library | {built-in / chai / etc.} | - |
| Mocking | {jest.mock / vitest.mock / unittest.mock} | - |
| Coverage tool | {c8 / istanbul / coverage.py} | {config} |

## Running Tests

```bash
# All tests
{npm test}

# Specific file
{npm test -- path/to/file}

# Watch mode
{npm run test:watch}

# Coverage
{npm run test:coverage}

# Specific pattern
{npm test -- --grep "pattern"}
```

## Test Organization

| Aspect | Pattern | Example |
|--------|---------|---------|
| Location | {co-located / separate directory} | `src/auth/auth.test.ts` or `tests/auth.test.ts` |
| File naming | {.test.ts / .spec.ts / test_.py} | `UserService.test.ts` |
| Describe blocks | {module/function/feature} | `describe('UserService')` |
| Test naming | {should X / it X / test_X} | `it('should return user by id')` |

## Test Structure Pattern

```{language}
// Pattern used in this codebase: {evidence file:line}
{actual test structure from codebase}
```

## Mocking Patterns

### External Services

```{language}
// How external services are mocked: {evidence file:line}
{actual mock pattern from codebase}
```

### Database

```{language}
// How database is mocked/seeded: {evidence file:line}
{actual pattern from codebase}
```

### API Calls

```{language}
// How API calls are mocked: {evidence file:line}
{actual pattern from codebase}
```

## Fixtures & Test Data

| Type | Location | Pattern |
|------|----------|---------|
| {Factories} | {tests/factories/} | {createUser(), createPost()} |
| {Fixtures} | {tests/fixtures/} | {JSON files} |
| {Seeds} | {prisma/seed.ts} | {Prisma seed script} |

## Coverage Configuration

| Setting | Value |
|---------|-------|
| Threshold | {if configured: line %, branch %, function %} |
| Include | {file patterns} |
| Exclude | {file patterns} |
| Reporter | {text / html / lcov} |

## E2E Testing

| Aspect | Value | Config |
|--------|-------|--------|
| Framework | {Playwright / Cypress / none} | {config file} |
| Location | {e2e/ or tests/e2e/} | - |
| Base URL | {config} | - |

## Testing Gaps

| Area | Has Tests | Notes |
|------|-----------|-------|
| {Unit tests} | {YES/NO/PARTIAL} | {coverage details} |
| {Integration tests} | {YES/NO/PARTIAL} | {coverage details} |
| {E2E tests} | {YES/NO/PARTIAL} | {coverage details} |
| {API tests} | {YES/NO/PARTIAL} | {coverage details} |
